3:I[1699,[],""]
5:I[2579,[],""]
6:I[9618,["618","static/chunks/618-6a6cc50adaace762.js","931","static/chunks/app/page-3813dd42f0b14061.js"],""]
7:I[5969,["618","static/chunks/618-6a6cc50adaace762.js","483","static/chunks/483-3759d859fd8148bc.js","185","static/chunks/app/layout-ac6f988959a18158.js"],"Image"]
4:["slug","2024-07-04-pnpm-action-node-version","d"]
0:["hwWPFFv0sk4x2lIyYVyQ1",[[["",{"children":["posts",{"children":[["slug","2024-07-04-pnpm-action-node-version","d"],{"children":["__PAGE__?{\"slug\":\"2024-07-04-pnpm-action-node-version\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["posts",{"children":[["slug","2024-07-04-pnpm-action-node-version","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/559f115268056a3a.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"ko","className":"__className_aaf875","children":["$","body",null,{"className":"flex flex-col w-full max-w-screen-lg mx-auto","children":[["$","header",null,{"className":"relative flex justify-center items-center p-8","children":[["$","$L6",null,{"href":"/","className":"flex flex-col items-center text-5xl","children":[["$","h1",null,{"className":"__className_5cd26d","children":"Better code coffee"}],["$","p",null,{"className":"text-base mt-3","children":"A blog by someone who strives for and enjoys writing better code and loves coffee"}]]}],["$","div",null,{"className":"absolute top-11 right-8 flex items-center gap-3 max-md:hidden","children":[["$","a",null,{"href":"https://github.com/soyoung-baker","children":["$","$L7",null,{"src":{"src":"/_next/static/media/ic_github_24.3c455590.svg","height":24,"width":24,"blurWidth":0,"blurHeight":0},"alt":"GitHub logo"}]}],["$","a",null,{"href":"https://www.linkedin.com/in/soyoung-jung-baker","children":["$","$L7",null,{"src":{"src":"/_next/static/media/ic_linkedin_24.3e548cc1.svg","height":24,"width":24,"blurWidth":0,"blurHeight":0},"alt":"LinkedIn logo"}]}]]}]]}],["$","main",null,{"className":"grow max-lg:px-3","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}],["$","div",null,{"className":"text-zinc-500 py-2 text-sm text-center","children":["© ",2024," 정소영. All rights reserved."]}]]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/1d0da72dfd2e68a9.css","precedence":"next","crossOrigin":"$undefined"}]],[null,"$L8"]]]]]
2:["$","article",null,{"className":"mt-16","children":[["$","time",null,{"className":"text-zinc-400","children":"2024-07-04"}],"$undefined",["$","section",null,{"className":"mt-4 pb-20","children":["$","div",null,{"className":"prose lg:prose-lg max-w-none","children":[["$","h1","h1-0",{"children":"pnpm action node version 에러"}],"\n",["$","p","p-0",{"children":"PR을 올린 후 GitHub Actions가 실패하는 문제가 발생했다. 로그를 확인해보니 install pnpm 단계에서 에러가 발생한 것이었다.\n내용은 아래와 같은데"}],"\n",["$","p","p-1",{"children":["$","img",null,{"className":"w-full h-auto object-cover","src":"https://soyoung-baker.github.io/images/blog/2024/2024-07/pnpm-action-error.png","alt":"pnpm action error","width":1440,"height":1200,"sizes":"(max-width: 768px) 1440px, 2304px"}]}],"\n",["$","p","p-2",{"children":"어제까지 잘 작동하던 액션이 갑자기 에러를 발생시키니, 특별한 설정 변경이 없었음에도 원인을 찾기 위해 구글링을 시작했다."}],"\n",["$","p","p-3",{"children":["$","a",null,{"href":"https://github.com/pnpm/action-setup/issues/135","className":"__className_b7f9cc","children":"https://github.com/pnpm/action-setup/issues/135"}]}],"\n",["$","p","p-4",{"children":"똑같은 증상으로 issue 를 올린 글을 확인했다."}],"\n",["$","h2","h2-0",{"children":"문제 원인 및 해결책"}],"\n",["$","p","p-5",{"children":"문제의 원인은 pnpm/action-setup 이슈에서 동일한 증상을 겪고 있는 사람들의 글을 통해 확인할 수 있었다. 해결책은 checkout 액션을 최신 버전인 v4로 업그레이드하는 것이었다. 실제로 버전을 올린 후 문제가 해결되었다. 왜 이런 문제가 발생했는지 알아보았다."}],"\n",["$","p","p-6",{"children":"GitHub Actions와 Node.js 버전 전환"}],"\n",["$","p","p-7",{"children":"작년부터 올해 GitHub Actions는 Node.js 20으로 전환하는 과정을 진행 중이었다."}],"\n",["$","p","p-8",{"children":["$","a",null,{"href":"https://github.blog/changelog/2023-09-22-github-actions-transitioning-from-node-16-to-node-20/","className":"__className_b7f9cc","children":"GitHub Actions: Transitioning from Node 16 to Node 20"}]}],"\n",["$","ul","ul-0",{"children":["\n",["$","li","li-0",{"children":"Node.js 16 지원이 종료된다."}],"\n",["$","li","li-1",{"children":"GitHub Actions는 Node.js 20으로 전환하는 프로세스를 시작했고, 2024년 봄까지 모든 액션을 Node.js 20에서 실행되도록 전환할 예정이다."}],"\n",["$","li","li-2",{"children":"2023년 10월 23일부터는 Node.js 16에서 실행되는 액션이 포함된 워크플로에 경고가 표시되어 사용자에게 다가오는 전환을 알릴 것이다."}],"\n"]}],"\n",["$","p","p-9",{"children":["이러한 GitHub Actions 의 소식으로 pnpm/action-setup 에서는 아래와 같은 대화가 있었다.\n",["$","a",null,{"href":"https://github.com/pnpm/action-setup/issues/99#issuecomment-1737700746","className":"__className_b7f9cc","children":"node20 support"}]]}],"\n",["$","ul","ul-1",{"children":["\n",["$","li","li-0",{"children":"pnpm/action-setup@v2 를 사용하는 사용자는 2023년 10월 23일부터 GitHub Actions로부터 지원 중단 경고를 받기 시작한다."}],"\n",["$","li","li-1",{"children":"Node.js 20 을 지원하는 pnpm/action-setup@v3 을 릴리스하면 명확한 전환을 제공할 수 있다."}],"\n",["$","li","li-2",{"children":"GitHub 이 Node.js 20 을 강제로 사용하기 때문에"}],"\n",["$","li","li-3",{"children":"actions/checkout은 Node.js 16에서 Node.js 20으로 마이그레이션하면서 actions/checkout@v3 에서 actions/checkout@v4로 새로운 주요 릴리스를 만들었다."}],"\n"]}],"\n",["$","p","p-10",{"children":["그리고 2024년 5월 17일에 ",["$","a",null,{"href":"https://github.blog/changelog/2024-05-17-updated-dates-for-actions-runner-using-node20-instead-of-node16-by-default/","className":"__className_b7f9cc","children":"Updated dates for Actions runner using Node20 instead of Node16 by default"}]," 업데이트 글이 올라왔다."]}],"\n",["$","ul","ul-2",{"children":["\n",["$","li","li-0",{"children":"2024년 6월 30일에 Node16의 기본 설정이 Node20으로 변경된다."}],"\n",["$","li","li-1",{"children":"Node16을 계속 사용하려면, ACTIONS_ALLOW_USE_UNSECURE_NODE_VERSION=true 환경 변수를 설정하면 된다."}],"\n",["$","li","li-2",{"children":"2024년 10월 초까지 Node16 사용량을 모니터링하면서 마이그레이션을 완료할 수 있는 시간 줄게."}],"\n"]}],"\n",["$","p","p-11",{"children":["따라서 Node.js 16으로 실행되던 pnpm/action-setup@v2를 사용해서 위와 같은 에러가 발생한 것이다. 그래서 Node.js 20을 제공하는 pnpm/action-setup@v3 버전이 릴리스된 것을 확인할 수 있다. ",["$","a",null,{"href":"https://github.com/pnpm/action-setup/releases/tag/v3.0.0","className":"__className_b7f9cc","children":"v3 릴리즈 노트"}]]}],"\n",["$","p","p-12",{"children":"이러한 이유로 처음에 v4로 버전업을 했을 때 에러가 해결된 것이다."}],"\n",["$","h2","h2-1",{"children":"마치면서"}],"\n",["$","p","p-13",{"children":"결론적으로 이 에러를 해결하기 위해 Node.js 20을 지원하는 pnpm/action-setup@v3, v4를 선택하면 된다.\n또한 해당 에러를 수정하면서 actions/checkout @v2에서 @4로 전환했다."}],"\n",["$","p","p-14",{"children":"참고로 pnpm/action-setup 액션은 Node.js를 설정하지 않기 때문에 Node.js 설정은 actions/setup-node를 사용하여 별도로 해야 한다. Node.js를 따로 설치해서 사용하지 않고 빌트인된 것을 쓰는 다른 팀에서는 runner-images 등 Node 16 버전 관련 에서 에러가 발생하기 시작했다."}],"\n",["$","p","p-15",{"children":"앞으로 업데이트되는 문서를 더 신경써서 봐야겠다."}],"\n",["$","h2","h2-2",{"children":"참고자료"}],"\n",["$","ul","ul-3",{"children":["\n",["$","li","li-0",{"children":["$","a",null,{"href":"https://github.com/pnpm/action-setup","className":"__className_b7f9cc","children":"https://github.com/pnpm/action-setup"}]}],"\n",["$","li","li-1",{"children":["$","a",null,{"href":"https://github.com/pnpm/action-setup/issues/99#issuecomment-1737700746","className":"__className_b7f9cc","children":"https://github.com/pnpm/action-setup/issues/99#issuecomment-1737700746"}]}],"\n",["$","li","li-2",{"children":["$","a",null,{"href":"https://github.blog/changelog/2023-09-22-github-actions-transitioning-from-node-16-to-node-20/","className":"__className_b7f9cc","children":"https://github.blog/changelog/2023-09-22-github-actions-transitioning-from-node-16-to-node-20/"}]}],"\n"]}]]}]}]]}]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"pnpm action node version 에러 | Better code coffee 블로그"}],["$","meta","3",{"name":"description","content":"pnpm action node version 에러에 관한 공부한 내용을 적은 포스트입니다."}],["$","link","4",{"rel":"icon","href":"/images/icons/favicons/favicon.ico"}],["$","meta","5",{"name":"next-size-adjust"}]]
1:null
